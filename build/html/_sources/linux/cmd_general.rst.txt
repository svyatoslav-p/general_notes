CMD
###

Системная информация
********************

+----------------------------------------+---------------------------------+
|                Команда                 |            Описание             |
+========================================+=================================+
| `hostnamectl`                          | информация о системе            |
+----------------------------------------+---------------------------------+
| `sudo hostnamectl set-hostname <name>` | изменить имя host-а             |
+----------------------------------------+---------------------------------+
| `cat /proc/cpuinfo`                    | информация о процессоре         |
+----------------------------------------+---------------------------------+
| `lsb_release -a`                       | версия дистрибутива             |
+----------------------------------------+---------------------------------+
| `cat /proc/cmdline`                    | параметры запуска ядра          |
+----------------------------------------+---------------------------------+
| `lspci -vt`                            | устройства на PCI шине          |
+----------------------------------------+---------------------------------+
| `lsusb -vt`                            | устройства на USB шине          |
+----------------------------------------+---------------------------------+
| `last reboot`                          | последняя перезагрузка          |
+----------------------------------------+---------------------------------+
| `lsmod`                                | вывести загруженные модули ядра |
+----------------------------------------+---------------------------------+
| `pstree`                               | дерево процессов                |
+----------------------------------------+---------------------------------+


Файлы и каталоги
****************

+-----------------------------+-----------------------------------------------------------------------------+
|           Команда           |                                  Описание                                   |
+=============================+=============================================================================+
| `mkdir -p /tmp/dir1/dir2`   | создать дерево директорий                                                   |
+-----------------------------+-----------------------------------------------------------------------------+
| `cd ..`                     | перейти в директорию уровнем выше                                           |
+-----------------------------+-----------------------------------------------------------------------------+
| `cd ../..`                  | перейти в директорию двумя уровнями выше                                    |
+-----------------------------+-----------------------------------------------------------------------------+
| `cd -`                      | перейти в директорию, в которой находились до перехода в текущую директорию |
+-----------------------------+-----------------------------------------------------------------------------+
| `cp dir/*`                  | копировать директорию `dir1` со всем содержимым в текущую директорию        |
+-----------------------------+-----------------------------------------------------------------------------+
| `cp -a /tmp/dir1`           | копировать директорию `dir1` со всем содержимым в текущую директорию        |
+-----------------------------+-----------------------------------------------------------------------------+
| `cp -a dir1 dir2`           | копировать директорию `dir1` в директорию `dir2`                            |
+-----------------------------+-----------------------------------------------------------------------------+
| `cp file file1`             | скопировать файл `file1` в файл `file2`                                     |
+-----------------------------+-----------------------------------------------------------------------------+
| `ln -s file1 lnk1`          | создать символическую ссылку на файл или директорию                         |
+-----------------------------+-----------------------------------------------------------------------------+
| `ln file1 lnk1`             | создать жёсткую (физическую) ссылку на файл или директорию                  |
+-----------------------------+-----------------------------------------------------------------------------+
| `mkdir dir1`                | создать директорию с именем `dir1`                                          |
+-----------------------------+-----------------------------------------------------------------------------+
| `mkdir dir1 dir2`           | создать две директории одновременно                                         |
+-----------------------------+-----------------------------------------------------------------------------+
| `mkdir -p /tmp/dir1/dir2`   | создать дерево директорий                                                   |
+-----------------------------+-----------------------------------------------------------------------------+
| `mv dir1 new_dir`           | переименовать или переместить файл или директорию                           |
+-----------------------------+-----------------------------------------------------------------------------+
| `pwd`                       | показать текущую директорию                                                 |
+-----------------------------+-----------------------------------------------------------------------------+
| `rm -f file1`               | удалить файл с именем `file1`                                               |
+-----------------------------+-----------------------------------------------------------------------------+
| `rm -rf dir1`               | удалить директорию с именем `dir1` и рекурсивно всё её содержимое           |
+-----------------------------+-----------------------------------------------------------------------------+
| `rm -rf dir1 dir2`          | удалить две директории и рекурсивно их содержимое                           |
+-----------------------------+-----------------------------------------------------------------------------+
| `rmdir dir1`                | удалить директорию с именем `dir1`                                          |
+-----------------------------+-----------------------------------------------------------------------------+
| `touch -t 0712250000 file1` | модифицировать дату и время создания файла (YYMMDDhhmm)                     |
+-----------------------------+-----------------------------------------------------------------------------+

Поиск файлов
************

+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+
|               Команда               |                                                           Описание                                                            |
+=====================================+===============================================================================================================================+
| `find / -name file1`                | найти файлы и директории с именем `file1`. Поиск начать с корня (/)                                                           |
+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+
| `find /home/user1 -name \*.bin`     | найти все файлы и директории, имена которых оканчиваются на `. bin`. Поиск начать с `/ home/user1`                            |
+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+
| `find /usr/bin -type f -atime +100` | найти все файлы в `/usr/bin`, время последнего обращения к которым более 100 дней                                             |
+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+
| `find /usr/bin -type f -mtime -10`  | найти все файлы в `/usr/bin`, созданные или изменённые в течении последних 10 дней                                            |
+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+
| `find / -xdev -name \*.rpm`         | найти все фалы и директории, имена которых оканчиваются на `.rpm`, игнорируя съёмные носители, такие как cdrom, floppy и т.п. |
+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------------+

Работа с файловыми системами,дисками
************************************

+-------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                             Команда                                             |                                                                        Описание                                                                         |
+=================================================================================================+=========================================================================================================================================================+
| `sudo fuser -km /mnt/hda2`                                                                      | отмонтировать устройство hda2 если оно занято                                                                                                           |
+-------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `sudo mount /dev/hda2 /mnt/hda2`                                                                | примонтировать диск с именем `/dev/hda2` в папку с именем `/mnt/hda2`- перед монтированием проверьте существование папки `/mnt/hda2`                    |
+-------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `sudo mount -o loop file.iso /mnt/cdrom`                                                        | примонтировать фаил или ISO образ (ISO - образ диска в ISO формате)                                                                                     |
+-------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `sudo mount \-\-bind ~/dir1 /mnt/boot/dir2`                                                     | смонтируем содержимое каталога `dir1` в каталог `dir2`                                                                                                  |
+-------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `sudo umount /dev/hda2`                                                                         | отмонтировать диск с именем `hda2` - незабудьте сначала выйти из точки монтирования `/mnt/hda2`                                                         |
+-------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `sudo losetup -f \-\-show /path/to/img.iso`                                                     | монтирование образа состоящего из нескольких разделов. `partprobe /dev/loopX` перечитать разделы. После монтировать как любой накопитель (`/dev/loopX`) |
+-------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `sudo losetup -d /dev/loop0`                                                                    | отмонтировать устройство `loop0`                                                                                                                        |
+-------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `sudo dd bs=4M if=/path/to/manjaro.iso of=/dev/sd[X] status=progress conv=notrunc,noerror,sync` | побитовое копирование из образа на диск                                                                                                                 |
+-------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `sudo dd bs=4M if=/dev/sd[X] of=name.iso status=progress conv=notrunc,noerror,sync`             | создаем образ диска в файл name.iso в текущем каталоге                                                                                                  |
+-------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `lsblk`                                                                                         | список дисков по иерархии                                                                                                                               |
+-------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `df -h`                                                                                         | отображает информацию о смонтированных разделах с отображением общего, доступного и используемого пространства                                          |
+-------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `mke2fs -j /dev/hda1`                                                                           | создать журналирующую файловую систему `ext3` на разделе `hda1`                                                                                         |
+-------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `mkfs -t vfat 32 -F /dev/hda1`                                                                  | создать файловую систему `FAT32` на разделе `hda1`                                                                                                      |
+-------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+

Pacman, Yaourt
**************

+---------------------------+---------------------------------------------------------------------------+
|          Команда          |                                 Описание                                  |
+===========================+===========================================================================+
| `sudo pacman -S <name>`   | установка конкретного пакета                                              |
+---------------------------+---------------------------------------------------------------------------+
| `sudo pacman -R <name>`   | удаление конкретного пакета                                               |
+---------------------------+---------------------------------------------------------------------------+
| `sudo pacman -Rdd <name>` | принудительное удаление конкретного пакета, с игнорированием зависимостей |
+---------------------------+---------------------------------------------------------------------------+
| `pacman -Ql <name>`       | просмотр списка файлов пакета                                             |
+---------------------------+---------------------------------------------------------------------------+
| `sudo pacman -Scc`        | очистка кэша                                                              |
+---------------------------+---------------------------------------------------------------------------+
| `sudo pacman -U <путь>`   | установка локального пакета [имя_пакета-версия.pkg.tar.xz]                |
+---------------------------+---------------------------------------------------------------------------+
| `sudo pacman -Syy`        | синхронизация с репозиторием                                              |
+---------------------------+---------------------------------------------------------------------------+
| `sudo pacman -Syu`        | обновление системы                                                        |
+---------------------------+---------------------------------------------------------------------------+
| `sudo pacman -Ss <name>`  | поиск пакета                                                              |
+---------------------------+---------------------------------------------------------------------------+
| `yaourt -ss <name>`       | поиск и установка пакета                                                  |
+---------------------------+---------------------------------------------------------------------------+

Сеть
****

+--------------------------------------------------------+-----------------------------------------------------------------------------------------------+
|                        Команда                         |                                           Описание                                            |
+========================================================+===============================================================================================+
| `sudo ifconfig eth0`                                   | отобразить настройку сетевой карты `eth0`                                                     |
+--------------------------------------------------------+-----------------------------------------------------------------------------------------------+
| `sudo ifconfig -a`                                     | отобразить все сетевые интерфейсы                                                             |
+--------------------------------------------------------+-----------------------------------------------------------------------------------------------+
| `sudo ifconfig eth0 192.168.1.1 netmask 255.255.255.0` | настроить IP адрес и маску подсети для сетевого интерфейса `eth0`                             |
+--------------------------------------------------------+-----------------------------------------------------------------------------------------------+
| `sudo ifconfig eth0 down`                              | отключить сетевой интерфейс `eth0`                                                            |
+--------------------------------------------------------+-----------------------------------------------------------------------------------------------+
| `sudo ifconfig eth0 up`                                | включить сетевой интерфейс `eth0`                                                             |
+--------------------------------------------------------+-----------------------------------------------------------------------------------------------+
| `sudo ethtool eth0`                                    | информация о физической активности (например наличие линка)                                   |
+--------------------------------------------------------+-----------------------------------------------------------------------------------------------+
| `sudo ifconfig eth0 broadcast 192.168.1.255`           | установить широковещательный адрес                                                            |
+--------------------------------------------------------+-----------------------------------------------------------------------------------------------+
| `sudo ifconfig eth0 hw ether AA:BB:CC:DD:EE:FF`        | задать MAC (перед этим выполнить `ifconfig eth0 down`), после перезагрузки сбросится          |
+--------------------------------------------------------+-----------------------------------------------------------------------------------------------+
| `wget -c www.example.com/file.iso`                     | загрузить файл `www.example.com/file.iso` с возможностью останова и продолжения в последствии |
+--------------------------------------------------------+-----------------------------------------------------------------------------------------------+
| `echo \'wget -c www.example.com/files.iso\' at 09:00`  | начать закачку в указанное время                                                              |
+--------------------------------------------------------+-----------------------------------------------------------------------------------------------+

Заметки
=======

#. Проброс сети через мост (например для виртуальной машины)

   - Зануляем активный интерфейс ``sudo ifconfig enp3s0 0.0.0.0``
   - Создаем мост ``sudo brctl addbr br0``
   - Связываем мост и реальный интерфейс ``sudo brctl addif br0 enp3s0``
   - Назначаем автоматический DHCP мосту ``sudo dhclient br0``
   - Для статического IP ``sudo ifconfig br0 192.168.1.108``

SSH
***
+---------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      Команда                      |                                                                           Описание                                                                           |
+===================================================+==============================================================================================================================================================+
| `ssh root@serverip`                               | открытие соединения (пользователь на клиенте `root`  c IP адресом `serverip`)                                                                                |
+---------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `scp root@serverip:/root/file.txt /home/file.txt` | копирует файл `file.txt` из удлаенного сервера на ПК                                                                                                         |
+---------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `scp file.txt root@serverip:/root/file.txt`       | копирует файл `file.txt` из ПК на удаленный сервер                                                                                                           |
+---------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `scp -r dir1 root@serverip:/root/dir`             | копирует папку `dir1` с локального хоста в папку `dir` на удаленный сервер                                                                                   |
+---------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `scp -p file.txt root@serverip:~`                 | копируем файл `file.txt` с локального компьютера в домашний каталог на удаленном сервере. Сохраняем время изменения, время доступа и права копируемого файла |
+---------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `spc root@serverip:~/\{file1,file2,file3\}`       | копирует несколько файлов с удаленного хоста в текущую директорию на ПК                                                                                      |
+---------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `ssh user@host \'bash -s\' < script.sh`           | выполнить локальный скрипт на удаленной машине                                                                                                               |
+---------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `ssh-keygen -t rsa`                               | создать ssh ключ `-C "comment"` для своего комментария                                                                                                       |
+---------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `ssh-copy-id -i ~/.ssh/id_rsa.pub user@host`      | добавить ключ на сервер                                                                                                                                      |
+---------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `ssh-copy-id \'-p 443 user@server\'`              | добавить ключ на сервер по иному порту                                                                                                                       |
+---------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `ssh UserName@RemoteServer \'команда\'`           | выполнить команду на удаленной машине                                                                                                                        |
+---------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `ssh user@host < local_file.txt`                  | взять пароль из локального файла                                                                                                                             |
+---------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `ssh -XC user@remotehost \"eclipse\"`             | запуск графического приложения                                                                                                                               |
+---------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+

Journalctl
**********

+---------------------------------------+----------------------------------------------------+
|                Команда                |                      Описание                      |
+=======================================+====================================================+
| `journalctl --list-boots`             | лист сессий                                        |
+---------------------------------------+----------------------------------------------------+
| `journalctl -b 1`                     | посмотреть лог сессии «1»                          |
+---------------------------------------+----------------------------------------------------+
| `journalctl -b -p err`                | посмотреть только ошибки                           |
+---------------------------------------+----------------------------------------------------+
| `journalctl \-\-since \'30 min ago\'` | посмотреть логи за последние 30 минут (30 min ago) |
+---------------------------------------+----------------------------------------------------+
| `journalctl \-\-vacuum-time=1years`   | удалить журнал за 1 год                            |
+---------------------------------------+----------------------------------------------------+

Systemctl
*********

+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
|           Команда           |                                                                        Описание                                                                         |
+=============================+=========================================================================================================================================================+
| `systemctl list-unit-files` | посмотреть список установленных файлов юнитов (доступные файлы юнитов можно посмотреть в каталогах `/usr/lib/systemd/system/` и `/etc/systemd/system/`) |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `systemctl start <name>`    | незамедлительно запустить юнит                                                                                                                          |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `systemctl stop <name>`     | незамедлительно остановить юнит                                                                                                                         |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `systemctl restart <name>`  | перезапустить юнит                                                                                                                                      |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `systemctl status <name>`   | показать статус юнита, а также запущен он или нет                                                                                                       |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `systemctl enable <name>`   | включить юнит в автозапуск при загрузке системы                                                                                                         |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `systemctl disable <name>`  | убрать юнит из автозапуска при загрузке системы                                                                                                         |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
| `systemctl daemon-reload`   | перезагрузка всех юнитов                                                                                                                                |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+

System V
********

+-------------------------------+-------------------------+
|            Команда            |        Описание         |
+===============================+=========================+
| `sudo service <name> start`   | запустить сервис        |
+-------------------------------+-------------------------+
| `sudo service <name> stop`    | остановить сервис       |
+-------------------------------+-------------------------+
| `sudo service <name> restart` | перезапустить сервис    |
+-------------------------------+-------------------------+
| `sudo service <name> status`  | состояние сервиса       |
+-------------------------------+-------------------------+
| `sudo service \-\-status-all` | состояния всех сервисов |
+-------------------------------+-------------------------+

NTP
***

+---------------------------------------+--------------------------------------------------+
|                Команда                |                     Описание                     |
+=======================================+==================================================+
| `sudo systemctl restart ntpd.service` | перезапустить сервис                             |
+---------------------------------------+--------------------------------------------------+
| `ntpq -pn`                            | Проверить состояние получения эталонного времени |
+---------------------------------------+--------------------------------------------------+
| `ntpdate -u <IP>`                     | установить дату и время с сервера по IP          |
+---------------------------------------+--------------------------------------------------+


Samba
*****

+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------+
|                                               Команда                                                |                                     Описание                                      |
+======================================================================================================+===================================================================================+
| `findsmb`                                                                                            | сканируем/ищем SMB-хосты                                                          |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------+
| `smbtree`                                                                                            | просмотр информации о составе сети                                                |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------+
| `smbpasswd -a <user_name>`                                                                           | создание нового пользователя Samba                                                |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------+
| `smbclient -L server -U <user_name>`                                                                 | получим список ресурсов SMB, доступных <user_name>                                |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------+
| `smbclient //192.168.1.1/myshare -u <user_name>`                                                     | подключение к Samba как к FTP (команды cd,ls,get,put,quit)                        |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------+
| mount -t cifs -o username=<Пользователь>,password= //<IP-адрес>/<Общий каталог> <Точка монтирования> | монтировать сетевую файловую систему Windows (SMB/CIFS)                           |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------+
|                                                                                                      | пример: `mount -t cifs -o username=Everyone,password= //10.0.0.1/public /media`   |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------+
| `sudo systemctl restart smb nmb`                                                                     | перезапустить samba для system.d                                                  |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------+
| `sudo service smbd nmbd restart`                                                                     | перезапустить samba для system V                                                  |
+------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------+

**О подключении к расшаренным папкам:** Почему то обращаясь по IP иногда нельзя подключиться к серверу. Надежнее использовать имя ПК. Например
для подключения расшаренного каталога ``smb_share_dir`` (прописан в ``smb.conf``) машиной с именем ``svyatoslav-g33590`` в поле адреса 
в системе Windows вводим: ``\\svyatoslav-g33590.local\smb_share_dir``

Пользователи и группы
*********************

+------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                Команда                                 |                                                                                          Описание                                                                                          |
+========================================================================+============================================================================================================================================================================================+
| `groupadd <name>`                                                      | создать новую группу с именем `group`                                                                                                                                                      |
+------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `groupdel <name>`                                                      | удалить группу `group`                                                                                                                                                                     |
+------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `groupmod -n moon sun`                                                 | переименовать группу `moon` в `sun`                                                                                                                                                        |
+------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `passwd <user>`                                                        | сменить пароль для `user`                                                                                                                                                                  |
+------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `useradd -c \'User Linux\' -g admin -d /home/user1 -s /bin/bash user1` | создать пользователя `user1`, назначить ему в качестве домашнего каталога `/home/user1`, в качестве shell'а `/bin/bash`, включить его в группу `admin` и добавить комментарий `User Linux` |
+------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `useradd user1`                                                        | создать пользователя user1                                                                                                                                                                 |
+------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `userdel -r user1`                                                     | удалить пользователя user1 и его домашний каталог                                                                                                                                          |
+------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Права на файлы
**************

+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|           Команда           |                                                                                                         Описание                                                                                                          |
+=============================+===========================================================================================================================================================================================================================+
| `chgrp group1 file1`        | сменить группу-владельца файла `file1` на `group1`                                                                                                                                                                        |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `chmod ugo+rwx directory1`  | добавить полномочия на директорию `directory1` ugo(User Group Other)+rwx(Read Write eXecute) - всем полные права. Аналогичное можно сделать таким образом chmod 777 directory1                                            |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `chmod go-rwx directory1`   | отобрать у группы и всех остальных все полномочия на директорию `directory1`                                                                                                                                              |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `chmod u+s /bin/file1`      | назначить SUID-бит файлу `/bin/binary_file`. Это даёт возможность любому пользователю запускать на выполнение файл с полномочиями владельца файла.                                                                        |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `chmod u-s /bin/file1`      | снять SUID-бит с файла `/bin/binary_file`                                                                                                                                                                                 |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `chown user1 file1`         | назначить владельцем файла `file1` пользователя `user1`                                                                                                                                                                   |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `chown -R user1 directory1` | назначить рекурсивно владельцем директории `directory1` пользователя `user1`                                                                                                                                              |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `ls -lh`                    | просмотр полномочий на файлы и директории в текущей директории                                                                                                                                                            |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `chattr +a file1`           | позволить открывать файл на запись только в режиме добавления                                                                                                                                                             |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `chattr +i file1`           | делает файл недоступным для любых изменений: редактирование, удаление, перемещение, создание линков на него                                                                                                               |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `chattr +s file1`           | позволяет сделать удаление файла безопасным, т.е. выставленный атрибут s говорит о том, что при удалении файла, место, занимаемое файлом на диске заполняется нулями, что предотвращяет возможность восстановления данных |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `chmod +x /file1`           | сделать файл исполняемым                                                                                                                                                                                                  |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Архивация и сжатие файлов
*************************

+-----------------------------------------+------------------------------------------------------------------------------------+
|                 Команда                 |                                      Описание                                      |
+=========================================+====================================================================================+
| `rar a file1.rar test_file`             | создать rar-архив `file1.rar` и включить в него файл `test_file`                   |
+-----------------------------------------+------------------------------------------------------------------------------------+
| `rar a file1.rar file1 file2 dir1`      | создать rar-архив `file1.rar` и включить в него `file1`, `file2` и `dir1`          |
+-----------------------------------------+------------------------------------------------------------------------------------+
| `rar x file1.rar`                       | распаковать rar-архив                                                              |
+-----------------------------------------+------------------------------------------------------------------------------------+
| `tar -cvf archive.tar file1 file2 dir1` | создать tar-архив `archive.tar`, содержащий файл `file1`, `file2` и `dir1`         |
+-----------------------------------------+------------------------------------------------------------------------------------+
| `tar -tf archive.tar`                   | показать содержимое архива                                                         |
+-----------------------------------------+------------------------------------------------------------------------------------+
| `tar -xvf archive.tar -C /tmp`          | распаковать архив в `/tmp`                                                         |
+-----------------------------------------+------------------------------------------------------------------------------------+
| `zip -r file1.zip file1 file2 dir1`     | создать сжатый zip-архив и со включением в него нескольких файлов и/или директорий |
+-----------------------------------------+------------------------------------------------------------------------------------+

Манипуляции с текстом
*********************

+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
|                  Команда                  |                                                                   Описание                                                                   |
+===========================================+==============================================================================================================================================+
| `cat -n file1`                            | пронумеровать строки при выводе содержимого файла                                                                                            |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `comm -1 file1 file2`                     | сравнить содержимое двух файлов, не отображая строки принадлежащие файлу `file1`                                                             |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `comm -2 file1 file2`                     | сравнить содержимое двух файлов, не отображая строки принадлежащие файлу `file2`                                                             |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `comm -3 file1 file2`                     | сравнить содержимое двух файлов, удаляя строки встречающиеся в обоих файлах                                                                  |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `diff file1 file2`                        | сравнить два файла                                                                                                                           |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `grep Aug /var/log/messages`              | из файла `/var/log/messages` отобрать и вывести на стандартное устройство вывода строки, содержащие `Aug`                                    |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `grep ^Aug /var/log/messages`             | из файла `/var/log/messages` отобрать и вывести на стандартное устройство вывода строки, начинающиеся на `Aug`                               |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `grep [0-9] /var/log/messages`            | из файла `/var/log/messages` отобрать и вывести на стандартное устройство вывода строки, содержащие цифры                                    |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `grep Aug -R /var/log/*`                  | отобрать и вывести на стандартное устройство вывода строки, содержащие `Aug`, во всех файлах, находящихся в директории `/var/log` и ниже     |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `paste file1 file2`                       | объединить содержимое `file1` и `file2` в виде таблицы: строка 1 из file1 = строка 1 колонка 1-n, строка 1 из file2 = строка 1 колонка n+1-m |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `paste -d \'+\' file1 file2`              | объединить содержимое `file1` и `file2` в виде таблицы с разделителем `+`                                                                    |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `sed \'s/string1/string2/g\' example.txt` | в файле `example.txt` заменить `string1` на `string2`, результат вывести на стандартное устройство вывода                                    |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `sed \'/^$/d\' example.txt`               | удалить пустые строки и комментарии из файла `example.txt`                                                                                   |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `sed -e \'1d\' exampe.txt`                | удалить первую строку из файла `example.txt`                                                                                                 |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `sed -n \'/string1/p\'`                   | отобразить только строки содержашие `string1`                                                                                                |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `sed -e \'s/ *$//\' example.txt`          | удалить пустые символы в в конце каждой строки                                                                                               |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `sed -e \'s/string1//g\' example.txt`     | удалить строку `string1` из текста не изменяя всего остального                                                                               |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `sed -n \'5p;5q\' example.txt`            | вывести пятую строку                                                                                                                         |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `sed -e \'s/00*/0/g\' example.txt`        | заменить последовательность из любого количества нулей одним нулём                                                                           |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| `sort file1 file2`                        | отсортировать содержимое двух файлов                                                                                                         |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------+

Создание резервных копий
************************

+--------------------------------------------------------------+--------------------------------------------------------------------------------------------+
|                           Команда                            |                                          Описание                                          |
+==============================================================+============================================================================================+
| `dump -0aj -f /tmp/home0.bak /home`                          | создать полную резервную копию директории `/home` в файл `/tmp/home0.bak`                  |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------+
| `dump -1aj -f /tmp/home0.bak /home`                          | создать инкрементальную резервную копию директории `/home` в файл `/tmp/home0.bak`         |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------+
| `restore -if /tmp/home0.bak`                                 | восстановить из резервной копии /tmp/home0.bak                                             |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------+
| `rsync -rogpav -e ssh --delete /home ip_address:/tmp`        | синхронизировать через SSH-туннель                                                         |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------+
| `rsync -az -e ssh --delete /home/local ip_addr:/home/public` | синхронизировать удалённую директорию с локальной директорией через ssh-туннель со сжатием |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------+

Docker
******

Установка: 

- ``sudo pacman -S docker``
- ``sudo pacman -S docker-compose``

Настройка:

- добавить пользователя в группу Docker ``sudo usermod -aG docker ${USER}``
- добавим в автозагрузку ``sudo systemctl enable docker.servise``
- запустим службу ``sudo systemctl start docker.servise``

+------------------------------------------------------------------+---------------------------------------+
|                             Команда                              |               Описание                |
+==================================================================+=======================================+
| `docker search <name>`                                           | поиск образа <name>                   |
+------------------------------------------------------------------+---------------------------------------+
| `docker pull <name>`                                             | загрузка образа из реестра            |
+------------------------------------------------------------------+---------------------------------------+
| `docker run -it \-\-rm <name>`                                   | запуск контейнера                     |
+------------------------------------------------------------------+---------------------------------------+
| `docker rename <old name> <new name>`                            | переименование контейнера             |
+------------------------------------------------------------------+---------------------------------------+
| `docker rm <name>`                                               | удаление контейнера                   |
+------------------------------------------------------------------+---------------------------------------+
| `docker start <name>`                                            | запуск контейнера                     |
+------------------------------------------------------------------+---------------------------------------+
| `docker stop <name>`                                             | остановка контейнера                  |
+------------------------------------------------------------------+---------------------------------------+
| `docker restart <name>`                                          | перезагрузка контейнера               |
+------------------------------------------------------------------+---------------------------------------+
| `docker pause <name>`                                            | пауза                                 |
+------------------------------------------------------------------+---------------------------------------+
| `docker unpause <name>`                                          | снятие паузы                          |
+------------------------------------------------------------------+---------------------------------------+
| `docker ps`                                                      | работающие контейнеры                 |
+------------------------------------------------------------------+---------------------------------------+
| `docker logs <name>`                                             | лог контейнера ключ ``-f`` непрерывно |
+------------------------------------------------------------------+---------------------------------------+
| `docker images`                                                  | список образов                        |
+------------------------------------------------------------------+---------------------------------------+
| `docker load -i /путь/до/сохранения/file.tar`                    | загрузка образа из .tar               |
+------------------------------------------------------------------+---------------------------------------+
| `docker save -o /путь/до/сохранения/file.tar`                    | сохранение образа в tar-архив         |
+------------------------------------------------------------------+---------------------------------------+
| `docker rmi <name>`                                              | удаление образа                       |
+------------------------------------------------------------------+---------------------------------------+
| `docker rmi $(docker images -a -q)`                              | удаление всех образов                 |
+------------------------------------------------------------------+---------------------------------------+
| `docker rmi $(docker images -f "dangling=true" -q) --force`      | удалить все образы без тега           |
+------------------------------------------------------------------+---------------------------------------+
| `docker stop $(docker ps -a -q) && docker rm $(docker ps -a -q)` | остановка и удаление всех контейнеров |
+------------------------------------------------------------------+---------------------------------------+
| `docker exec -it b4a144826c5a /bin/bash`                         | войти в контейнер                     |
+------------------------------------------------------------------+---------------------------------------+
| `docker network ls`                                              | доступные сети внутри docker          |
+------------------------------------------------------------------+---------------------------------------+
| `docker -H tcp://192.168.0.52:2375 ps`                           | контейнеры на удаленном docker        |
+------------------------------------------------------------------+---------------------------------------+
|                                                                  | (если открыт socket на сервере)       |
+------------------------------------------------------------------+---------------------------------------+
| `docker volume prune`                                            | удалить неиспользуемые volume         |
+------------------------------------------------------------------+---------------------------------------+




Заметки
=======

#. Открыть удаленное подключение к демону (проверено на CentOS 7)

   #. Создаем файл конфигурации для Docker daemon или добавляем в текущую ``nano /etc/docker/daemon.json``

      .. code-block:: json

        {
          "hosts": ["tcp://0.0.0.0:2375", "unix:///var/run/docker.sock"]
        }

   #. Создаем ``nano /etc/systemd/system/docker.service.d/override.conf`` (каталог ``docker.service.d`` создать если отсутсвует)

      .. code-block:: ini

         [Service]
         ExecStart=
         ExecStart=/usr/bin/dockerd

   #. Перезапускаем ``systemctl daemon-reload`` и ``systemctl restart docker.service``

#. Установка оффлайн на CentOS 7

   .. code-block:: bash

      wget http://mirror.centos.org/centos/7/extras/x86_64/Packages/container-selinux-XX.noarch.rpm
      wget https://download.docker.com/linux/centos/7/x86_64/stable/Packages/docker-ce-XX.x86_64.rpm
      wget https://download.docker.com/linux/centos/7/x86_64/stable/Packages/docker-ce-cli-XX.x86_64.rpm
      wget https://download.docker.com/linux/centos/7/x86_64/stable/Packages/docker-ce-selinux-XX.noarch.rpm
      wget https://download.docker.com/linux/centos/7/x86_64/stable/Packages/containerd.io-XX.x86_64.rpm
      sudo systemctl restart network # Just for test purposes
      
      sudo rpm -i container-selinux-XX.noarch.rpm
      sudo rpm -i docker-ce-20.10.9-3.el7.x86_64.rpm docker-ce-cli-20.10.9-3.el7.x86_64.rpm docker-ce-selinux-17.03.3.ce-1.el7.noarch.rpm containerd.io-1.4.9-3.1.el7.x86_64.rpm docker-ce-rootless-extras-20.10.9-3.el7.x86_64.rpm docker-scan-plugin-0.9.0-3.el7.x86_64.rpm
      sudo systemctl start docker

Midnight Commander
******************

+----------------------------------------+-----------------------+
|                Команда                 |       Описание        |
+========================================+=======================+
| `Ctrl + o`                             | полноэкранная консоль |
+----------------------------------------+-----------------------+
| `Ctrl + обратный слэш (рядом c Enter)` | меню закладок         |
+----------------------------------------+-----------------------+
| `shift+f6`                             | переименовать         |
+----------------------------------------+-----------------------+
| `user:pass@192.168.1.210`              | подключение по FTP    |
+----------------------------------------+-----------------------+
| `shift+f4`                             | создать новый файл    |
+----------------------------------------+-----------------------+

Редкатор
========

+-----------------+------------------------------------------------+
|     Команда     |                    Описание                    |
+=================+================================================+
| `Shift-Ins`     | вставить текст из буфера                       |
+-----------------+------------------------------------------------+
| `Shift+F5`      | вставка текста из внутреннего буфера обмена mc |
+-----------------+------------------------------------------------+
| `Shift+Стрелки` | выделение текста                               |
+-----------------+------------------------------------------------+

GIT
***

+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
|                             Команда                             |                                                        Описание                                                         |
+=================================================================+=========================================================================================================================+
| `git init`                                                      | создать локально новый репозиторий                                                                                      |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git init <directory>`                                          | cоздание репозитория в указанном каталоге                                                                               |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git clone \-\-recurse-submodules ssh://user@dom.com/repo.git`  | клонировать существующий репозиторий со всеми submodule                                                                 |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git -c http.sslVerify=false clone https://example.com/path/`   | игнорирование SSL сертификата для текущей операции                                                                      |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git status`                                                    | состояние отслеживаемых файлов, `-s` краткий вид                                                                        |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git commit -m \"Commit Comment\"`                              | коммит с комментарием                                                                                                   |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git add -A`                                                    | добавить все файлы в stage                                                                                              |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git add -p <файл>`                                             | добавить файл в stage                                                                                                   |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git commit --amend`                                            | изменение комментария к последнему комииту, если после последнего коммита не было ни каких изменений в рабочем каталоге |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git rm <file_name>`                                            | удаление файла из отслеживаемых Git, а так же его физическое удаление из рабочего каталога                              |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git rm -f <file_name>`                                         | удаление проиндексированного измененного файла                                                                          |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git rm —cached <file_name>`                                    | удаление файла из индекса, но сохранение его в рабочем каталоге                                                         |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git log`                                                       | показать всю историю коммитов начиная с последних                                                                       |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git log -p <файл>`                                             | показать историю изменений определенного файла                                                                          |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git blame <файл>`                                              | кто, какие и когда изменения вносил в <файл>                                                                            |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git log -2`                                                    | вывод последних n записей, в примере вывод двух последних записей                                                       |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git reset --hard HEAD`                                         | удалить все локальные изменения в рабочем каталоге                                                                      |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git checkout HEAD <файл>`                                      | удалить локальные изменения в отдельном <файле> (до внесения файла в коммит)                                            |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git revert <коммит>`                                           | откатить коммит                                                                                                         |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git remote`                                                    | просмотр удаленных репозиториев `-v` подробнее                                                                          |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git remote add origin https://github.com/n0tb0dy/UpRemote.git` | добавление удаленного репозитория (вместо origin можно задать любое слово)                                              |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git push origin master`                                        | отправка данных на удаленный репозиторий. Формат git push [удал. сервер] [локальная ветка]                              |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git fetch <репо>`                                              | cкачать все изменения из <remote>, но не интегрировать их в HEAD                                                        |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git pull <репо> <ветка>`                                       | скачать изменения и сразу слить/интегрировать их в HEAD                                                                 |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git remote rename <old_name> <new_name>`                       | переименование удаленных репозиториев (по существу переименование локальной ссылки на удаленный репозиторий)            |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git remote rm origin`                                          | удаление удаленного репозитория (попросту отключение от него                                                            |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git branch`                                                    | посмотреть локальные ветки                                                                                              |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git branch –v`                                                 | посмотреть последний коммит на каждой из локальных веток                                                                |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git branch <имя_ветки>`                                        | создать ветку                                                                                                           |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git branch new_branch 5a0eb04`                                 | создать ветку на определенном коммите                                                                                   |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git branch -m <oldname> <newname>`                             | переименовать ветку                                                                                                     |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git checkout <имя_ветки>`                                      | переключится на ветку                                                                                                   |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git checkout -b <имя_ветки>`                                   | создать ветку и сразу же переключится на нее                                                                            |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git branch -d <имя_ветки>`                                     | удалить ветку                                                                                                           |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git submodule update \-\-init \-\-recursive`                   | слить все submodule входящие в проект                                                                                   |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git submodule add https://github.com/chaconinc`                | добавить submodeule в репозиторий                                                                                       |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| `git config \-\-global http.sslVerify false`                    | игнорирование SSL сертификата всегда для этого репозитория                                                              |
+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------+


GIT рекомендации
================

Типы коммитов:

- **Feat:** новая фича, добавляемая к приложению
- **Fix:** исправление бага.
- **Style:** функции и обновления, имеющие отношение к стилизации.
- **Refactor:** рефакторинг определенного участка кодовой базы.
- **Test:** все, что касается тестирования.
- **Docs:** все, что касается документации.
- **Chore:** любые другие изменения, не затрагивающие код.

Общие рекомендации:

- Отделяйте заголовок от тела сообщения пустой строкой.
- Не ставьте точку в конце заголовка.
- Заголовок и каждый отдельный абзац должны начинаться с заглавной буквы.
- Используйте тело сообщения, чтобы описать вносимые изменения и причины этих изменений.

Шаблон коммита:

.. code-block:: bash
  :linenos:

  Тип(область действия): Заголовок до 70 символов

  Более детальное описание изменений, если необходимо

  Описание проблемы которую решает, если необходимо

   * Новый абзац

   * Новый абзац

Пример коммита:

.. code-block:: bash
  :linenos:

  Fix(uart): исправлена работа uart

  Изменена скорость работы uart

  Приемник управляется корректно

   * Скорость управляется параметром UART_CLK
   * 
GIT наборы команд
=================

#. **Залить все ветки в репозиторий.** Запустить скрипт из корня проекта :download:`Скачать <linux_files/cmd/git/pull_all_branch.sh>`

   .. literalinclude:: linux_files/cmd/git/pull_all_branch.sh
     :language: bash
     :linenos:

#. **Создать новую пустую ветку без истории** 

   - ``git checkout --orphan production`` (``production`` - имя ветки)
   - ``git rm -rf .``
   - ``git add .`` (если нужно добавить новые файлы)
   - ``git commit --allow-empty -m "init production``
   - ``git push origin production``

WireGuard + PiVPN
*****************

+--------------------------+-----------------------+
|         Команда          |       Описание        |
+==========================+=======================+
| `sudo wg-quick up wg0`   | включить VPN          |
+--------------------------+-----------------------+
| `sudo wg-quick down wg0` | отключить VPN         |
+--------------------------+-----------------------+
| `sudo wg show`           | статистика клиентов   |
+--------------------------+-----------------------+
| `pivpn add`              | добавить пользователя |
+--------------------------+-----------------------+
| `pivpn -r`               | удалить пользователя  |
+--------------------------+-----------------------+
| `pivpn -l`               | список пользователей  |
+--------------------------+-----------------------+
| `pivpn -qr`              | показать QR код       |
+--------------------------+-----------------------+

Virsh, QEMU
***********

+-----------------------------------------+------------------------------+
|                 Команда                 |           Описание           |
+=========================================+==============================+
| `sudo virsh list --all`                 | Показать все машины          |
+-----------------------------------------+------------------------------+
| `sudo virsh shutdown NAME`              | отключить штатно машину      |
+-----------------------------------------+------------------------------+
| `sudo virsh start NAME`                 | включить машину              |
+-----------------------------------------+------------------------------+
| `sudo virsh domblklist NAME`            | информация о диске           |
+-----------------------------------------+------------------------------+
| `qemu-img info /path/disk.qcow2`        | подробная информация о диске |
+-----------------------------------------+------------------------------+
| `qemu-img resize /path/disk.qcow2 +10G` | Добавить 10G к диску         |
+-----------------------------------------+------------------------------+
| `pivpn -qr`                             | показать QR код              |
+-----------------------------------------+------------------------------+